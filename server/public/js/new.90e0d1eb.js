(function(e){function t(t){for(var n,r,o=t[0],l=t[1],c=t[2],f=0,u=[];f<o.length;f++)r=o[f],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(n=!1)}n&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},a={new:0},s=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;s.push([1,"chunk-vendors"]),i()})({1:function(e,t,i){e.exports=i("4667")},"125b":function(e,t,i){e.exports=i.p+"img/ruksi.e8abd383.png"},"2afd":function(e,t,i){},4667:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("FormNavbar"),i("Tausta"),i("projectForm")],1)},s=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{attrs:{id:"project",enctype:"multipart/form-data",action:"#",method:"post"},on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[i("article",[i("section",[i("label",[e._v("Title")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{maxlength:e.titleMaxCharacters,placeholder:"Project Title",type:"text",name:"title",required:""},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),i("p",{staticClass:"count"},[e._v(e._s(e.title.length)+"/"+e._s(e.titleMaxCharacters))])]),i("section",[i("label",[e._v("Link")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.link,expression:"link"}],attrs:{placeholder:"Project Web-page",type:"url",autocomplete:"url",name:"repo",pattern:"[Hh][Tt][Tt][Pp][Ss]?:\\/\\/(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]+-?)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]+-?)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,}))(?::\\d{2,5})?(?:\\/[^\\s]*)?"},domProps:{value:e.link},on:{input:function(t){t.target.composing||(e.link=t.target.value)}}})]),i("section",[i("label",[e._v("Description")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.descr,expression:"descr"}],attrs:{maxlength:e.descrMaxCharacters,placeholder:"Project Description",type:"text",name:"descr"},domProps:{value:e.descr},on:{input:function(t){t.target.composing||(e.descr=t.target.value)}}}),e._v(" "),i("p",{staticClass:"count"},[e._v(e._s(e.descr.length)+"/"+e._s(e.descrMaxCharacters))])]),i("section",[i("label",[e._v("Thumbnail")]),i("div",{staticClass:"input-output"},[e.logo.display?i("img",{attrs:{src:e.logo.src,id:"pic"},on:{load:e.handleLoad}}):e._e(),e.logo.display?i("button",{staticClass:"removeButton",attrs:{type:"button"},on:{click:function(t){return e.removeImage()}}},[e._v("Remove")]):e._e(),i("label",{class:[e.logo.display?"fileUpload-small":"fileUpload"],attrs:{id:"dropFile",for:"file"}},[e._m(0)]),i("input",{attrs:{accept:this.validFileExtensions,type:"file",id:"file",name:"file"}})]),i("p",{staticClass:"count"},[e._v(e._s(e.fD.files.length)+"/1")])]),i("section",[i("label",[e._v("Images")]),i("div",{staticClass:"input-output"},[e._m(1),i("input",{attrs:{multiple:"",accept:this.validFileExtensions,type:"file",id:"files",name:"files"}}),e._l(e.projectImages,(function(t){return i("ul",{key:t.id,attrs:{id:"listOfImages"}},[i("li",{staticClass:"tooltip"},[i("button",{staticClass:"removeButton",attrs:{type:"button"},on:{click:function(i){return e.removeFile(t)}}},[e._v("Remove")]),e._v(e._s(t.name)),i("span",[i("img",{attrs:{src:t.src},on:{load:e.handleLoad}})])])])}))],2),i("p",{staticClass:"count"},[e._v(e._s(e.projectImages.length)+"/10")])]),e.editmode?e._e():i("button",{attrs:{type:"submit"}},[e._v("Add Project")]),e.editmode?i("button",{staticClass:"updateButton",attrs:{type:"button"},on:{click:e.updateProject}},[e._v("Update Project")]):e._e(),e.editmode?i("button",{staticClass:"removeButton",attrs:{type:"button"},on:{click:e.deleteProject}},[e._v("Delete Project")]):e._e()])])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("span",{staticClass:"selectFile"},[e._v("Choose a file ")]),i("span",[e._v(" or drag it here.")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"fileUpload",attrs:{id:"dropFiles",for:"files"}},[i("p",[i("span",{staticClass:"selectFile"},[e._v("Choose a file(s)")]),e._v(" or drag it here.")])])}],l=i("1da1"),c=(i("96cf"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("b0c0"),i("a15b"),i("ac1f"),i("841c"),i("c1f9"),i("9911"),{name:"projectForm",data:function(){return{postAddress:"api/projects/",getAddress:"api/projects/",imgAddress:"api/files/",projectImages:[],validFileExtensions:[".jpg",".jpeg",".bmp",".gif",".png"],projectId:-1,editmode:!1,title:"",titleMaxCharacters:50,descrMaxCharacters:500,link:"",descr:"",files:document.getElementById("files"),file:document.getElementById("file"),dT:new DataTransfer,fD:new DataTransfer,logo:{src:"",display:!1}}},methods:{deleteProject:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=document.getElementById("project"),n=e,t.next=4,fetch(e.postAddress+e.projectId,{method:"DELETE",body:{id:n.projectId}}).then((function(e){n.projectImages=[],n.logo.src="",n.logo.display=!1,i.reset(),window.location.href="/new"})).catch((function(e){}));case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},updateProject:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=document.getElementById("project"),n=e,t.next=4,fetch(e.postAddress+e.projectId,{method:"PUT",body:new FormData(i)}).then((function(e){n.projectImages=[],n.logo.src="",n.logo.display=!1,i.reset(),window.location.href="/new"})).catch((function(e){}));case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=document.getElementById("project"),n=e,t.next=4,fetch(e.postAddress,{method:"POST",body:new FormData(i)}).then((function(e){n.projectImages=[],n.logo.src="",n.logo.display=!1,i.reset()})).catch((function(e){}));case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},handleLoad:function(){this.$root.$emit("myEvent","update")},addImagesList:function(e){this.projectImages=[];for(var t=0;t<e.length;t++){var i={id:t,src:URL.createObjectURL(e[t]),name:e[t].name,file:e[t]};this.projectImages.push(i),console.log(i)}},removeImage:function(){this.file.files=(new DataTransfer).files,this.fD=new DataTransfer,this.logo.src="",this.logo.display=!1},removeFile:function(e){this.projectImages=[],this.dT=new DataTransfer;for(var t=0;t<this.files.files.length;t++)this.files.files[t]!=e.file&&this.dT.items.add(this.files.files[t]);this.files.files=this.dT.files;for(var i=0;i<this.files.files.length;i++){var n={id:i,src:URL.createObjectURL(this.files.files[i]),name:this.files.files[i].name,file:this.files.files[i]};this.projectImages.push(n),console.log(n)}},validateFile:function(e){var t=!1;if(e.length>0)for(var i=0;i<this.validFileExtensions.length;i++){var n=this.validFileExtensions[i];if(e.substr(e.length-n.length,n.length).toLowerCase()==n.toLowerCase()){t=!0;break}}return!!t||(alert("Sorry, "+e+" is invalid, allowed extensions are: "+this.validFileExtensions.join(", ")),!1)}},created:function(){var e=new URLSearchParams(window.location.search),t=Object.fromEntries(e.entries());if(null!=t.id||void 0!=t.id){console.log("Vanha projekti: "+t.id),this.editmode=!0;var i=this;fetch(this.getAddress+t.id).then((function(e){return e.json()})).then((function(e){i.dT=new DataTransfer;for(var t=function(t){fetch(i.imgAddress+e.pics_id[t]).then((function(e){return e.blob()})).then((function(n){fetch(i.imgAddress+e.pics_id[t]+"/details").then((function(e){return e.json()})).then((function(e){i.dT.items.add(new File([n],e.filename)),i.files.files=i.dT.files,i.addImagesList(i.files.files)}))}))},n=0;n<e.pics_id.length;n++)t(n);null==e.thumb_id&&void 0==e.thumb_id||fetch(i.imgAddress+e.thumb_id).then((function(e){return e.blob()})).then((function(t){fetch(i.imgAddress+e.thumb_id+"/details").then((function(e){return e.json()})).then((function(e){i.fD.items.add(new File([t],e.filename)),i.file.files=i.fD.files,i.logo.src=URL.createObjectURL(i.file.files[0]),i.logo.display=!0}))})),i.projectId=e._id,i.title=e.title,i.link=e.repo,i.descr=e.descr}))}else this.editmode=!1,console.log("Uusi projekti")},mounted:function(){var e=document.getElementById("dropFile"),t=document.getElementById("dropFiles");this.files=document.getElementById("files"),this.file=document.getElementById("file");var i=this;t.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy",t.classList.add("fileUpload-dragOver")})),t.addEventListener("dragleave",(function(e){t.classList.remove("fileUpload-dragOver")})),t.addEventListener("drop",(function(e){t.classList.remove("fileUpload-dragOver"),e.stopPropagation(),e.preventDefault();for(var n=e.dataTransfer,a=0;a<n.files.length;a++)i.validateFile(n.files[a].name)&&i.dT.files.length<10&&i.dT.items.add(n.files[a]);i.files.files=i.dT.files,i.addImagesList(i.files.files)})),e.addEventListener("dragover",(function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy",e.classList.add("fileUpload-dragOver")})),e.addEventListener("dragleave",(function(t){e.classList.remove("fileUpload-dragOver")})),e.addEventListener("drop",(function(e){if(e.stopPropagation(),e.preventDefault(),i.validateFile(e.dataTransfer.files[0].name)){i.fD=new DataTransfer;for(var t=0;t<e.dataTransfer.files.length;t++)i.fD.items.add(e.dataTransfer.files[t]);i.logo.src=URL.createObjectURL(e.dataTransfer.files[0]),i.logo.display=!0}i.file.files=i.fD.files})),i.file.addEventListener("change",(function(e){if(i.validateFile(e.target.files[0].name)){i.fD=new DataTransfer;for(var t=0;t<e.target.files.length;t++)i.fD.items.add(e.target.files[t]);i.logo.src=URL.createObjectURL(e.target.files[0]),i.logo.display=!0}i.file.files=i.fD.files})),i.files.addEventListener("change",(function(e){for(var t=e.target,n=0;n<t.files.length;n++)i.validateFile(t.files[n].name)&&i.dT.files.length<10&&i.dT.items.add(t.files[n]);i.files.files=i.dT.files,i.addImagesList(i.files.files)}))}}),d=c,f=(i("6ede"),i("2877")),u=Object(f["a"])(d,r,o,!1,null,"c45f6e72",null),h=u.exports,p=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav",[n("ul",{attrs:{id:"nav"}},[n("h3",{staticClass:"head"},[e._v(" Portfolio ")]),n("div",{staticClass:"navbar"},[n("li",[n("img",{staticClass:"icon cancel-btn",attrs:{id:"light",src:i("125b"),alt:"Hampparimenu"}})]),n("li",{staticClass:"navitem"},[n("a",{staticClass:"navlink",attrs:{href:"/?edit=true",id:"one"}},[e._v("Home")])]),n("li",{staticClass:"navitem"},[n("a",{staticClass:"navlink",attrs:{href:"/new",id:"two"}},[e._v("New")])])]),n("div",[n("img",{staticClass:"icon",attrs:{id:"menu-btn",src:i("911a"),alt:"Hampparimenu"}})])])])])}],g={name:"Navbar",mounted:function(){window.onscroll=function(){s()};var e=document.getElementById("nav"),t=document.getElementById("menu-btn"),i=document.querySelector(".navbar"),n=document.querySelector(".cancel-btn"),a=(document.querySelector("body"),e.offsetTop);function s(){window.pageYOffset>=a?e.classList.add("sticky"):e.classList.remove("sticky")}t.onclick=function(){i.classList.add("active"),t.classList.add("hide"),n.classList.add("active")},n.onclick=function(){i.classList.remove("active"),t.classList.remove("hide"),n.classList.remove("active")}}},v=g,b=(i("6a91"),Object(f["a"])(v,p,m,!1,null,"5805d8c7",null)),y=b.exports,w=i("ce71"),j={name:"App",components:{Tausta:w["a"],projectForm:h,FormNavbar:y},mounted:function(){}},_=j,x=(i("af0c"),Object(f["a"])(_,a,s,!1,null,null,null)),E=x.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(E)}}).$mount("#app")},"6a91":function(e,t,i){"use strict";i("f280")},"6ede":function(e,t,i){"use strict";i("f98e")},"911a":function(e,t,i){e.exports=i.p+"img/hamppari.5069ddf1.png"},"93d0":function(e,t,i){"use strict";i("952d")},"952d":function(e,t,i){},af0c:function(e,t,i){"use strict";i("2afd")},ce71:function(e,t,i){"use strict";var n,a,s,r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("canvas",{attrs:{id:"gamecanvas"}})},o=[],l=i("2909"),c=i("d4ec"),d=i("bee2"),f=(i("cb29"),i("caad"),i("2532"),i("99af"),i("a434"),[]),u=0,h=!1,p={x:null,y:null};function m(){var e=document.getElementById("app");n.width=e.getBoundingClientRect().width,e=document.body;var t=document.documentElement;s.removeChild(n);var i=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);n.height=i,s.appendChild(n)}function g(){n=document.getElementById("gamecanvas"),a=n.getContext("2d");var e=document.getElementById("app");n.width=e.getBoundingClientRect().width,e=document.body;var t=document.documentElement;s=n.parentNode,s.removeChild(n);var i=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);n.height=i,n.width=e.getBoundingClientRect().width,s.appendChild(n),e.addEventListener("click",(function(e){p.x=e.x,p.y=e.y})),e.addEventListener("mousemove",(function(e){p.x=e.pageX,p.y=e.pageY,b()})),e.addEventListener("change",(function(i){s.removeChild(n);var a=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);n.height=a,n.width=e.getBoundingClientRect().width,s.appendChild(n)})),window.addEventListener("resize",(function(){s.removeChild(n);var i=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);n.height=i,n.width=e.getBoundingClientRect().width,s.appendChild(n)})),window.onload=function(){var i=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);n.width=e.getBoundingClientRect().width,n.height=i},w()}var v=function(){function e(){Object(c["a"])(this,e),this.x=p.x,this.y=p.y,this.connections=[],this.size=9*Math.random()+1,this.speedX=3*Math.random()-1.5,this.speedY=3*Math.random()-1.5,this.color="hsl("+u+",0.2%, 100%",this.color=h?"rgba(255,255,255,0.2)":"rgba(30,30,30,0.2)"}return Object(d["a"])(e,[{key:"update",value:function(){this.size>.2&&(this.size-=.1),this.x+=this.speedX,this.y+=this.speedY}},{key:"draw",value:function(){this.x>n.width?this.x=0:this.x<0&&(this.x=n.width),this.y>n.height?this.y=0:this.y<0&&(this.y=n.height),a.fillStyle=this.color,a.beginPath(),a.arc(this.x,this.y,this.size,0,2*Math.PI),a.fill()}}]),e}();function b(){for(var e=0;e<5;e++)f.push(new v)}function y(){for(var e=0;e<f.length;e++){f[e].update(),f[e].draw();for(var t=e;t<f.length;t++){var i=f[e].x-f[t].x,n=f[e].y-f[t].y,s=Math.sqrt(i*i+n*n);s<f[e].size+50&&f[e].connections.length<3&&(f[e].connections.includes(f[t])||(f[e].connections=[].concat(Object(l["a"])(f[e].connections),[f[t]]),a.beginPath(),a.strokeStyle=h?"hsl("+u+",100%, 0%":"rgb(104,33,122)",a.lineWidth=f[e].size/10,a.moveTo(f[e].x,f[e].y),a.lineTo(f[t].x,f[t].y),a.stroke(),a.closePath()))}f[e].size<=.2&&(f.splice(e,1),e--)}for(var r=0;r<f.length;r++)f[r].connections=[]}function w(){a.fillStyle=h?"rgba(255,255,255,0.2)":"rgba(30,30,30,0.2)",a.fillRect(0,0,n.width,n.height),y(),u++,requestAnimationFrame(w)}var j={name:"Tausta",mounted:function(){var e=this;g(),this.$root.$on("myEvent",(function(t){e.message=t,m()}))}},_=j,x=(i("93d0"),i("2877")),E=Object(x["a"])(_,r,o,!1,null,"0b3f5166",null);t["a"]=E.exports},f280:function(e,t,i){},f98e:function(e,t,i){}});
//# sourceMappingURL=new.90e0d1eb.js.map